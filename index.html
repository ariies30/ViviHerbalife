function renderShop(){
  const view = qs('#view');
  view.innerHTML = `
    <section class="hero">
      <div class="card pad">
        <h1 style="margin:0 0 6px">Nutrizione semplice, risultati reali</h1>
        <p class="muted">Scegli tra shake, bevande energetiche, snack proteici e supporti quotidiani. Offriamo consulenza gratuita per aiutarti a definire il programma pi√π adatto a te.</p>
        <div class="toolbar" style="margin-top:14px">
          <input class="input" id="search" placeholder="Cerca prodotto, categoria o parola chiave‚Ä¶"/>
          <button class="btn" id="filterSnack">üç´ Snack</button>
          <button class="btn" id="filterShake">ü•§ Shake</button>
          <button class="btn ghost" id="resetFilters">Reset</button>
        </div>
      </div>
      <div class="card pad">
        <strong>Consulenza personalizzata</strong>
        <p class="muted">Nuovo/a? Prenota una call gratuita di 15 minuti: analizziamo le tue abitudini e ti proponiamo un piano realistico.</p>
        <div class="ribbon"><span class="chip">Durata: 15'</span><span class="chip">Online</span></div>
        <div style="margin-top:12px"><a href="#contatti" class="btn brand">Prenota ora</a></div>
      </div>
    </section>
    <section class="card pad">
      <div style="display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:12px">
        <strong>Prodotti</strong>
        <div class="muted" id="count"></div>
      </div>
      <div class="products" id="products"></div>
    </section>`;

  const listEl = qs('#products');
  const countEl = qs('#count');

  function renderList(list){
    countEl.textContent = `${list.length} risultati`;
    listEl.innerHTML = list.map(p=>`
      <article class="product card">
        <div class="img-wrap"><img src="${p.image}" alt="${p.name}" loading="lazy"></div>
        ${p.tags?.includes('new')?'<div class="badge">NUOVO</div>':''}
        ${p.tags?.includes('best-seller')?'<div class="badge" style="left:auto;right:12px">BEST</div>':''}
        <div class="pad" style="padding:14px">
          <div style="display:flex;align-items:center;justify-content:space-between;gap:10px">
            <h3 style="margin:0;font-size:1rem">${p.name}</h3>
            <div class="price">${money(p.price)}</div>
          </div>
          <div class="muted" style="font-size:.9rem;margin:6px 0 10px">${p.category}</div>
          <div class="toolbar">
            <button class="btn brand" data-action="add" data-id="${p.id}">Aggiungi</button>
            <button class="btn" data-action="view" data-id="${p.id}">Dettagli</button>
            ${p.paymentLink?`<a class="btn" href="${p.paymentLink}" target="_blank" rel="noopener">Compra ora</a>`:''}
          </div>
        </div>
      </article>
    `).join('');

    // Bind
    listEl.querySelectorAll('[data-action="add"]').forEach(b=> b.onclick = ()=> addToCart(PRODUCTS.find(p=>p.id===b.dataset.id)));
    listEl.querySelectorAll('[data-action="view"]').forEach(b=> b.onclick = ()=> openModal(PRODUCTS.find(p=>p.id===b.dataset.id)));
  }

  // iniziale
  renderList(PRODUCTS);

  // ricerca/filtri
  qs('#search').addEventListener('input', e=>{
    const q = e.target.value.toLowerCase();
    const filtered = PRODUCTS.filter(p=>
      p.name.toLowerCase().includes(q) ||
      p.category.toLowerCase().includes(q) ||
      p.desc.toLowerCase().includes(q)
    );
    renderList(filtered);
  });

  qs('#filterSnack').onclick = ()=> renderList(PRODUCTS.filter(p=>/snack/i.test(p.category)));
  qs('#filterShake').onclick = ()=> renderList(PRODUCTS.filter(p=>/sostitutivi/i.test(p.category)));
  qs('#resetFilters').onclick = ()=> { qs('#search').value=''; renderList(PRODUCTS); };
}
